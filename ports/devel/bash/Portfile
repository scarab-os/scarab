# Description: GNU Bourne-Again Shell
# URL: https://www.gnu.org/software/bash/
# Depends:

name=bash
version=5.2.37
source=https://ftp.gnu.org/gnu/bash/bash-$version.tar.gz

build() {
    cd $name-$version
    ./configure --host=$CROSS --prefix=/usr --without-bash-malloc --disable-nls --without-curses \
        CFLAGS="-Os -std=gnu89 -Wno-error" LDFLAGS="-static" \
        bash_cv_getcwd_malloc=yes bash_cv_func_sigsetjmp=present \
        bash_cv_must_reinstall_sighandlers=no bash_cv_sys_named_pipes=present
    make CC_FOR_BUILD="gcc" CFLAGS_FOR_BUILD="-O2 -std=gnu89 -Wno-error" -j$(nproc)
    mkdir -p $PKG/usr/bin
    cp bash $PKG/usr/bin/bash
}
