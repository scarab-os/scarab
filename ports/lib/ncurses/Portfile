# Description: Terminal handling library
# URL: https://invisible-island.net/ncurses/
# Depends:

name=ncurses
version=6.6
source=https://ftp.gnu.org/gnu/ncurses/ncurses-$version.tar.gz

build() {
    cd $name-$version

    ./configure \
        --prefix=/usr \
        --with-shared \
        --without-debug \
        --without-normal \
        --enable-widec \
        --enable-pc-files \
        --with-pkg-config-libdir=/usr/lib/pkgconfig

    make -j$(nproc)
    make DESTDIR=$PKG install

    # Symlinks for non-wide compatibility
    for lib in ncurses form panel menu; do
        ln -sf lib${lib}w.so $PKG/usr/lib/lib${lib}.so
        ln -sf ${lib}w.pc $PKG/usr/lib/pkgconfig/${lib}.pc
    done
}
