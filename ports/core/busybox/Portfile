# Description: Swiss army knife of embedded Linux
# URL: https://busybox.net
# Depends:

name=busybox
version=1.37.0
source=https://busybox.net/downloads/busybox-$version.tar.bz2

build() {
    cd $name-$version
    make defconfig
    sed -i "s|.*CONFIG_CROSS_COMPILER_PREFIX.*|CONFIG_CROSS_COMPILER_PREFIX=\"${CROSS}-\"|" .config
    sed -i 's|# CONFIG_STATIC is not set|CONFIG_STATIC=y|' .config
    sed -i 's|CONFIG_TC=y|# CONFIG_TC is not set|' .config
    yes "" | make oldconfig > /dev/null 2>&1
    make -j$(nproc)
    make CONFIG_PREFIX=$PKG install
}
