# Description: GNU Compiler Collection
# URL: https://gcc.gnu.org
# Depends: gmp mpfr mpc zlib

name=gcc
version=15.2.0
source=https://ftp.gnu.org/gnu/gcc/gcc-$version/gcc-$version.tar.xz

build() {
    cd $name-$version
    mkdir build && cd build
    ../configure \
        --host=$CROSS \
        --target=$CROSS \
        --prefix=/usr \
        --libdir=/usr/lib \
        --libexecdir=/usr/lib \
        --disable-multilib \
        --disable-nls \
        --disable-bootstrap \
        --disable-libsanitizer \
        --enable-languages=c,c++ \
        --enable-default-pie \
        --enable-default-ssp \
        --with-system-zlib
    make -j$(nproc)
    make DESTDIR=$PKG install
    ln -sf gcc $PKG/usr/bin/cc
}
