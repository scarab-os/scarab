# Description: GNU Compiler Collection
# URL: https://gcc.gnu.org
# Depends: gmp mpfr mpc zlib

name=gcc
version=15.2.0
source=https://ftp.gnu.org/gnu/gcc/gcc-$version/gcc-$version.tar.xz

build() {
    cd $name-$version

    mkdir build && cd build
    ../configure \
        --prefix=/usr \
        --libdir=/usr/lib \
        --libexecdir=/usr/lib \
        --disable-multilib \
        --disable-nls \
        --enable-default-pie \
        --enable-default-ssp \
        --enable-languages=c,c++ \
        --with-system-zlib

    make -j$(nproc)
    make DESTDIR=$PKG install

    # Symlinks
    ln -sf gcc $PKG/usr/bin/cc
    ln -sf g++ $PKG/usr/bin/c++
}
